(function(){var e={};(function(){function t(e,n,r){var i=Object.create(e.prototype),s=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/;r=r||{};for(var o in r){var u=r[o],a=i[o];typeof a=="function"&&typeof u=="function"&&s.test(u)?i[o]=function(e,t){return function(){var n=this.parent;this.parent=t;var r=e.apply(this,arguments);return this.parent=n,r}}(u,a):i[o]=u}i.typename=n;var f=function(){i.init&&i.init.apply(this,arguments)};return f.prototype=i,f.prototype.constructor=f,f.extend=function(e,n){return typeof e=="object"&&(n=e,e="anonymous"),t(f,e,n)},f}e.object=t(Object,"Object",{})})(),function(){var t=Array.prototype,n=Object.prototype,r=e.lib={};r.TemplateError=function(e,t,n){var r=this;return e instanceof Error?(r=e,e=e.name+": "+e.message):Error.captureStackTrace(r),r.name="Template render error",r.message=e,r.lineno=t,r.colno=n,r.firstUpdate=!0,r.Update=function(e){var t="("+(e||"unknown path")+")";return this.firstUpdate&&this.lineno&&this.colno&&(t+=" [Line "+this.lineno+", Column "+this.colno+"]"),t+="\n ",this.firstUpdate&&(t+=" "),this.message=t+(this.message||""),this.firstUpdate=!1,this},r},r.TemplateError.prototype=Error.prototype,r.isFunction=function(e){return n.toString.call(e)=="[object Function]"},r.isArray=Array.isArray||function(e){return n.toString.call(e)=="[object Array]"},r.isString=function(e){return n.toString.call(e)=="[object String]"},r.isObject=function(e){return e===Object(e)},r.groupBy=function(e,t){var n={},i=r.isFunction(t)?t:function(e){return e[t]};for(var s=0;s<e.length;s++){var o=e[s],u=i(o,s);(n[u]||(n[u]=[])).push(o)}return n},r.toArray=function(e){return Array.prototype.slice.call(e)},r.without=function(e){var t=[];if(!e)return t;var n=-1,i=e.length,s=r.toArray(arguments).slice(1);while(++n<i)s.indexOf(e[n])===-1&&t.push(e[n]);return t},r.extend=function(e,t){for(var n in t)e[n]=t[n];return e},r.repeat=function(e,t){var n="";for(var r=0;r<t;r++)n+=e;return n},r.each=function(e,n,r){if(e==null)return;if(t.each&&e.each==t.each)e.forEach(n,r);else if(e.length===+e.length)for(var i=0,s=e.length;i<s;i++)n.call(r,e[i],i,e)},r.map=function(e,n){var r=[];if(e==null)return r;if(t.map&&e.map===t.map)return e.map(n);for(var i=0;i<e.length;i++)r[r.length]=n(e[i],i);return e.length===+e.length&&(r.length=e.length),r}}(),function(){var t=e.lib,n={abs:function(e){return Math.abs(e)},batch:function(e,t,n){var r=[],i=[];for(var s=0;s<e.length;s++)s%t===0&&i.length&&(r.push(i),i=[]),i.push(e[s]);if(i.length){if(n)for(var s=i.length;s<t;s++)i.push(n);r.push(i)}return r},capitalize:function(e){return e=e.toLowerCase(),e[0].toUpperCase()+e.slice(1)},center:function(e,n){n=n||80;if(e.length>=n)return e;var r=n-e.length,i=t.repeat(" ",r/2-r%2),s=t.repeat(" ",r/2);return i+e+s},"default":function(e,t){return e?e:t},escape:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},first:function(e){return e[0]},groupby:function(e,n){return t.groupBy(e,n)},indent:function(e,n,r){n=n||4;var i="",s=e.split("\n"),o=t.repeat(" ",n);for(var u=0;u<s.length;u++)u==0&&!r?i+=s[u]+"\n":i+=o+s[u]+"\n";return i},join:function(e,n,r){return n=n||"",r&&(e=t.map(e,function(e){return e[r]})),e.join(n)},last:function(e){return e[e.length-1]},length:function(e){return e.length},list:function(e){if(t.isString(e))return e.split("");if(t.isObject(e)){var n=[];if(Object.keys)n=Object.keys(e);else for(var r in e)n.push(r);return t.map(n,function(t){return{key:t,value:e[t]}})}throw new t.TemplateError("list filter: type not iterable")},lower:function(e){return e.toLowerCase()},random:function(e){var t=Math.floor(Math.random()*e.length);return t==e.length&&t--,e[t]},replace:function(e,t,n,r){var i=e,s=i,o=1;i=i.replace(t,n);while(s!=i){if(o>=r)break;s=i,i=i.replace(t,n),o++}return i},reverse:function(e){var r;return t.isString(e)?r=n.list(e):r=t.map(e,function(e){return e}),r.reverse(),t.isString(e)?r.join(""):r},round:function(e,t,n){t=t||0;var r=Math.pow(10,t),i;return n=="ceil"?i=Math.ceil:n=="floor"?i=Math.floor:i=Math.round,i(e*r)/r},slice:function(e,t,n){var r=Math.floor(e.length/t),i=e.length%t,s=0,o=[];for(var u=0;u<t;u++){var a=s+u*r;u<i&&s++;var f=s+(u+1)*r,l=e.slice(a,f);n&&u>=i&&l.push(n),o.push(l)}return o},sort:function(e,n,r,i){return e=t.map(e,function(e){return e}),e.sort(function(e,s){var o,u;return i?(o=e[i],u=s[i]):(o=e,u=s),!r&&t.isString(o)&&t.isString(u)&&(o=o.toLowerCase(),u=u.toLowerCase()),o<u?n?1:-1:o>u?n?-1:1:0}),e},string:function(e){return e.toString()},title:function(e){return e.toUpperCase()},trim:function(e){return e.replace(/^\s*|\s*$/g,"")},upper:function(e){return e.toUpperCase()},wordcount:function(e){return e.match(/\w+/g).length},"float":function(e,t){return parseFloat(e)||t},"int":function(e,t){return parseInt(e)||t}};n.d=n.default,n.e=n.escape,e.filters=n}(),function(){function r(e,t,n){return function(){var r=o(arguments),i,u=s(arguments);if(r>e.length){i=Array.prototype.slice.call(arguments,0,e.length);var a=Array.prototype.slice.call(arguments,i.length,r);for(var f=0;f<a.length;f++)f<t.length&&(u[t[f]]=a[f]);i.push(u)}else if(r<e.length){i=Array.prototype.slice.call(arguments,0,r);for(var f=r;f<e.length;f++){var l=e[f];i.push(u[l]),delete u[l]}i.push(u)}else i=arguments;return n.apply(this,i)}}function i(e){return e.__keywords=!0,e}function s(e){return e.length&&e[e.length-1].__keywords?e[e.length-1]:{}}function o(e){return e.length===0?0:e[e.length-1].__keywords?e.length-1:e.length}function u(e){return e!==undefined&&e!==null?e:""}function a(e,t){return e=e||{},t=e[t],typeof t=="function"?function(){return u(t.apply(e,arguments))}:u(t)}function f(e,t,n){var r=e.lookup(n);return r!==undefined&&r!==null?r:t.lookup(n)}var t=e.object,n=t.extend({init:function(e){this.variables={},this.parent=e},set:function(e,t){var n=e.split("."),r=this.variables;for(var i=0;i<n.length-1;i++){var s=n[i];r[s]||(r[s]={}),r=r[s]}r[n[n.length-1]]=t},lookup:function(e){var t=this.parent,n=this.variables[e];return n!==undefined&&n!==null?n:t&&t.lookup(e)},push:function(){return new n(this)},pop:function(){return this.parent}});e.runtime={Frame:n,makeMacro:r,makeKeywordArgs:i,numArgs:o,suppressValue:u,suppressLookupValue:a,contextOrFrameLookup:f}}(),function(){var t=e.lib,n=e.object,r=e.lexer,i=e.compiler,s=e.filters,o=e.loaders,u=e.runtime,a=u.Frame,f=n.extend({init:function(e,n,i){this.dev=i,e?this.loaders=t.isArray(e)?e:[e]:o.FileSystemLoader?this.loaders=[new o.FileSystemLoader]:this.loaders=[new o.HttpLoader("/views")],n&&r.setTags(n),this.filters=s,this.cache={}},tryTemplate:function(e,n){try{return n()}catch(r){r.Update||(r=t.TemplateError(r)),r.Update(e);if(!this.dev){var i=r;r=new Error(i.message),r.name=i.name}throw r}},addFilter:function(e,t){this.filters[e]=t},getFilter:function(e){if(!this.filters[e])throw new Error("filter not found: "+e);return this.filters[e]},getTemplate:function(e,t){var n=null,r=this.cache[e],i;if(typeof e!="string")throw new Error("template names must be a string: "+e);if(!r||!r.isUpToDate()){for(var s=0;s<this.loaders.length;s++)if(n=this.loaders[s].getSource(e))break;if(!n)throw new Error("template not found: "+e);this.cache[e]=new c(n.src,this,n.path,n.upToDate,t)}return this.cache[e]},registerPrecompiled:function(e){for(var t in e)this.cache[t]=new c({type:"code",obj:e[t]},this,t,function(){return!0},!0)},express:function(n){var r=this;if(n.render)n.render=function(e,n,i){var s={};t.isFunction(n)&&(i=n,n={}),s=t.extend(s,this.locals),n._locals&&(s=t.extend(s,n._locals)),s=t.extend(s,n);var o=r.render(e,s);i(null,o)};else{var i=e.http,s=i.ServerResponse.prototype;s._render=function(e,n,i){var s=this.app,o={};this._locals&&(o=t.extend(o,this._locals)),n&&(o=t.extend(o,n),n.locals&&(o=t.extend(o,n.locals))),o=t.extend(o,s._locals);var u=r.render(e,o);i?i(null,u):this.send(u)}}},render:function(e,t){return this.getTemplate(e).render(t)}}),l=n.extend({init:function(e,t){this.ctx=e,this.blocks={},this.exported=[];for(var n in t)this.addBlock(n,t[n])},lookup:function(e){return this.ctx[e]},setVariable:function(e,t){this.ctx[e]=t},getVariables:function(){return this.ctx},addBlock:function(e,t){this.blocks[e]=this.blocks[e]||[],this.blocks[e].push(t)},getBlock:function(e){if(!this.blocks[e])throw new Error('unknown block "'+e+'"');return this.blocks[e][0]},getSuper:function(e,t,n){var r=(this.blocks[t]||[]).indexOf(n),i=this.blocks[t][r+1],s=this;return function(){if(r==-1||!i)throw new Error('no super block available for "'+t+'"');return i(e,s)}},addExport:function(e){this.exported.push(e)},getExported:function(){var e={};for(var t=0;t<this.exported.length;t++){var n=this.exported[t];e[n]=this.ctx[n]}return e}}),c=n.extend({init:function(e,n,r,i,s){this.env=n||new f;if(t.isObject(e))switch(e.type){case"code":this.tmplProps=e.obj;break;case"string":this.tmplStr=e.obj}else{if(!t.isString(e))throw new Error("src must be a string or an object describing the source");this.tmplStr=e}this.path=r,this.upToDate=i||function(){return!1};if(s){var o=this;this.env.tryTemplate(this.path,function(){o._compile()}),o=null}else this.compiled=!1},render:function(e,t){var n=this,r=function(){n.compiled||n._compile();var r=new l(e||{},n.blocks);return n.rootRenderFunc(n.env,r,t||new a,u)};return this.env.tryTemplate(this.path,r)},isUpToDate:function(){return this.upToDate()},getExported:function(){this.compiled||this._compile();var e=new l({},this.blocks);return this.rootRenderFunc(this.env,e,new a,u),e.getExported()},_compile:function(){var e;if(this.tmplProps)e=this.tmplProps;else{var t=new Function(i.compile(this.tmplStr,this.env));e=t()}this.blocks=this._getBlocks(e),this.rootRenderFunc=e.root,this.compiled=!0},_getBlocks:function(e){var t={};for(var n in e)n.slice(0,2)=="b_"&&(t[n.slice(2)]=e[n]);return t}});e.environment={Environment:f,Template:c}}();var t=e.environment,n=e.compiler,r=e.parser,i=e.lexer,s=e.loaders;window.nunjucks={},window.nunjucks.Environment=t.Environment,window.nunjucks.Template=t.Template,s.FileSystemLoader?window.nunjucks.FileSystemLoader=s.FileSystemLoader:window.nunjucks.HttpLoader=s.HttpLoader,window.nunjucks.compiler=n,window.nunjucks.parser=r,window.nunjucks.lexer=i,window.nunjucks.require=function(t){return e[t]}})();