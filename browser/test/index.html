<html>
<head>
  <meta charset="utf-8">
  <title>Nunjucks Browser Tests</title>
  <link rel="stylesheet" href="qunit.css" />
</head>
<body>
  <div id="qunit"></div>
  <div id="qunit-fixture"></div>
  <script src="qunit.js"></script>
  <script src="../nunjucks-dev.js"></script>
  <script>
    test("lexer should work", function() {
      var tokenizer = nunjucks.lexer.lex('Hello {{ username }}');
      deepEqual(tokenizer.nextToken(), {
        type: "data",
        value: "Hello ",
        lineno: 0,
        colno: 0
      });
      deepEqual(tokenizer.nextToken(), {
        type: "variable-start",
        value: "{{",
        lineno: 0,
        colno: 6
      });
      deepEqual(tokenizer.nextToken(), {
        type: "whitespace",
        value: " ",
        lineno: 0,
        colno: 6
      });
    });

    test("raw string templates should work", function() {
      var tmpl = new nunjucks.Template('Hello {{ username }}');
      var rendered = tmpl.render({username: 'James'});
      equal(rendered, "Hello James");
    });

    test("HttpLoader should work", function() {
      var loader = new nunjucks.HttpLoader('.');
      equal(loader.fetch('sample-template.txt'), "Hello {{ username }}");
    });

    test("HttpLoader should work w/ nunjucks environment", function() {
      var loader = new nunjucks.HttpLoader('.');
      var env = new nunjucks.Environment(loader);
      var rendered = env.render('sample-template.txt', {
        username: 'James'
      });
      equal(rendered, "Hello James");
    });
  </script>
</body>
</html>
