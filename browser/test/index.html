<html>
<head>
  <meta charset="utf-8">
  <title>Nunjucks Browser Tests</title>
  <link rel="stylesheet" href="../../node_modules/mocha/mocha.css" />
</head>
<body>
  <div id="mocha"></div>
  <script src="../../node_modules/expect.js/expect.js"></script>
  <script src="../../node_modules/mocha/mocha.js"></script>
  <script src="../nunjucks-dev.js"></script>
  <script>mocha.setup('bdd')</script>
  <script>
    describe('lexer', function() {
      it('should work', function(done) {
        var tokenizer = nunjucks.lexer.lex('Hello {{ username }}');
        expect(tokenizer.nextToken()).to.eql({
          type: "data",
          value: "Hello ",
          lineno: 0,
          colno: 0
        });
        expect(tokenizer.nextToken()).to.eql({
          type: "variable-start",
          value: "{{",
          lineno: 0,
          colno: 6
        });
        expect(tokenizer.nextToken()).to.eql({
          type: "whitespace",
          value: " ",
          lineno: 0,
          colno: 6
        });
        done();
      });
    });

    describe('raw string templates', function() {
      it('should substitute variables', function(done) {
        var tmpl = new nunjucks.Template('Hello {{ username }}');
        var rendered = tmpl.render({username: 'James'});
        expect(rendered).to.be("Hello James");
        done();
      });
    });

    mocha.checkLeaks();
    mocha.globals(['nunjucks']);
    mocha.run();
  </script>
</body>
</html>
